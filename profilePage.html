<!DOCTYPE html>
<html>
     <head>
          <title> Connectify - [username] </title>
          <link rel="stylesheet" type="text/css" href="profilePage.css">
          <link rel="icon" href="resources/Logo.svg" type="image/svg+xml">

          <!-- SCRIPTS -->
          <script src="profile1-data.js"></script>
          <script src="actionButton.js"></script>
     </head>

     <body>
          <!-- HEADER PORTION -->
          <header>
               <div id="headercol1" onclick="window.location.href='homePage.html'">
                    <img id="logo" src="resources/Logo.svg" />
                    <p id="appName"> Connectify </p>
               </div>
               <div id="headercol2">
                    <div class="searchBar">
                         <img src="resources/Trailing-Elements.svg" alt="Search Icon">
                         <input type="text" id="search" name="search" placeholder="Search #tags or ::words::" required>
                    </div>
               </div>
          </header>

          <div id="content">
               <div id="profileHeader">
                    <img src="resources/headerSample.jpg" onclick="openModal(this)" />
               </div>
               
               <div id="sub-container">
                    <!-- USER STATS/OPTIONS COLUMN -->
                    <div id="col1">
                         <!-- USERNAME, PROFILE, FOLLOW/ER COUNT -->
                         <div class="col1-sub-container"> 
                              <!-- PFP and USERNAME -->
                              <div id="pfpcontainer">
                                   <div id="pfpPic">
                                        <img src="resources/pfpSample.jpg" onclick="openModal(this)" />
                                   </div>

                                   <p class="maintext" id="display_name"></p>
                                   <p class="subtext" id="username"></p>
                              </div>

                              <div class="inviBrk"> </div>
                              
                              <!-- FOLLOW/ER COUNTS -->
                              <div id="count">
                                   <div id="followers">
                                        <p class="maintext" id="num_likes"></p>
                                        <p class="subtext"> Likes </p>
                                   </div>

                                   <div id="following">
                                        <p class="maintext" id="num_posts"></p>
                                        <p class="subtext"> Posts </p>
                                   </div>
                              </div>
                         </div>

                         <!-- BIO -->
                         <div class="col1-sub-container"> 
                              <h3> BIO </h3>

                              <!-- BIO PLACEHOLDER -->
                              <p id="bio" class="regulartext"></p>
                         </div>

                         <!-- TAGS -->
                         <div class="col1-sub-container"> 
                              <h3> TAGS </h3>

                              <!-- IF NO TAGS AVAILABLE -->
                              <!--<p class="regulartext" style="opacity: 80%;"> No tags available</p>-->

                              <!-- TAGS AVAILABLE -->
                              <div id="taglist">
                                   <!--<button class="usertags"> 
                                        #TagHere
                                   </button>
                                   <button class="usertags"> 
                                        #AnotherTagHere
                                   </button>
                                   <button class="usertags"> 
                                        #ProbablyAnotherTagHere
                                   </button>-->
                              </div>
                         </div>

                         <!-- SETTINGS -->
                         <div class="col1-sub-container"> 
                              <button class="editProfile" onclick="window.location.href='editProfilePage.html'">
                                   <img src="resources/Edit Icon.svg" alt="">
                                   Account Settings
                              </button>
                              <button class="logOut" onclick="window.location.href='loginPage.html'">
                                   <img src="resources/Log Out Icon.svg" alt="">
                                   Log Out
                              </button>
                         </div>
                    </div>

                    <!-- USER POSTS/COMMENTS COLUMN -->
                    <div id="col2">
                         <!-- TAB SELECTION ROW -->
                         <div id="tabrow"> 
                              <button class="tab active" onclick="showContent('poststab', this)">Posts</button>
                              <button class="tab" onclick="showContent('commentstab', this)">Comments</button>
                              <button class="tab" onclick="showContent('bookmarkstab', this)">Bookmarks</button>
                              <button class="tab" onclick="showContent('likestab', this)">Likes</button>
                         </div>

                         <!-- SPECIFIC TAB -->
                         <div class="col2-sub-container">
                              <!-- POSTS TAB -->
                              <div id="poststab" class="tab-content">

                                   <!-- LOAD POST DATA -->
                                   <div id="userPostsContainer"></div>
                                   <script src="userPosts.js"></script>
                                   <script>
                                        document.addEventListener("DOMContentLoaded", loadUserPosts);
                                   </script>

                              </div>

                              <!-- COMMENTS TAB -->
                              <div id="commentstab" class="tab-content">

                                   <!-- LOAD COMMENT DATA -->
                                   <div id="userCommentContainer"></div>
                                   <script src="userComments.js"></script>
                                   <script>
                                        document.addEventListener("DOMContentLoaded", loadUserComments);
                                   </script>
                              </div>

                              <!-- BOOKMARKS TAB -->
                              <div id="bookmarkstab" class="tab-content">

                                   <!-- LOAD BOOKMARK DATA -->
                                   <div id="userBookmarksContainer"></div>
                                   <script src="userBookmarks.js"></script>
                                   <script>
                                        document.addEventListener("DOMContentLoaded", loadUserBookmarks);
                                   </script>
                              </div>

                              <!-- LIKES TAB -->
                              <div id="likestab" class="tab-content">

                                  <!-- LOAD LIKES DATA -->
                                  <div id="userLikesContainer"></div>
                                  <script src="userLikes.js"></script>
                                  <script>
                                       document.addEventListener("DOMContentLoaded", loadUserLikes);
                                  </script>
                              </div>

                         </div>
                    </div>
               </div>
          </div>

          <!-- IMAGE MODAL -->
          <div id="imageModal" class="modal">
               <span class="close">&times;</span>
               <div id="userphotocontainer-modal"> 
                    <img class="modal-content" id="modalImage">
               </div>
               <div id="caption"></div>
          </div>
     </body>
</html>

<!-- JAVASCRIPT -->
<script>
     /* ----- HARD CODED DATA ----- */
     document.addEventListener("DOMContentLoaded", () => {
          const displayNameElement = document.getElementById('display_name');
          const usernameElement = document.getElementById('username');
          const likesCountElement = document.getElementById('num_likes');
          const postsCountElement = document.getElementById('num_posts');

          var profile = profile1

          // Populate the DOM elements with data from profile1
          displayNameElement.textContent = profile.display_name;
          usernameElement.textContent = profile.username;
          likesCountElement.textContent = profile.likes;
          postsCountElement.textContent = profile.posts;

          printBio(profile1.bio);
          printTags(profile1.tags);
     });


     /* ----- NECESSARY FUNCTIONS ----- */
     function printTags (tags) {
          const tagListElement = document.getElementById("taglist");

          if (tags.length === 0) {
               tagListElement.innerHTML = '<p class="regulartext" id="no-tag-msg">No tags available</p>';
          } else {
               tagListElement.innerHTML = tags
                    .map(tag => `<button class="usertags">${tag}</button>`)
                    .join("");
          }
     }

     function printBio (bio) {
          const bioElement = document.getElementById('bio');

          if (bio.length === 0) {
               bioElement.textContent = "Boring! No bio yet...";
               bioElement.classList.add('no-bio-msg');
          } else {
               bioElement.textContent = bio;
               bioElement.classList.remove('no-bio-msg');
          }
     }

     function openModal(image) {
          const modal = document.getElementById("imageModal");
          const modalImg = document.getElementById("modalImage");
          const captionText = document.getElementById("caption");
     
          console.log("Image source:", image.src);
          modal.style.display = "block";
          modalImg.src = image.src;
     
          modal.onclick = function () {
               modal.style.display = "none";
          };
     }

     function showContent(tabId, button) {
          const tabContents = document.querySelectorAll('.tab-content');
          tabContents.forEach(content => {
               content.style.display = 'none';
          });

          const tabButtons = document.querySelectorAll('.tab');
          tabButtons.forEach(tab => {
               tab.classList.remove('active');
          });

          const selectedTabContent = document.getElementById(tabId);
          if (selectedTabContent) {
               selectedTabContent.style.display = 'block';
          }

          button.classList.add('active');
     }
</script>