<!DOCTYPE html>
<html>
     <head>
          <link rel="stylesheet" type="text/css" href="profileTabs.css">
     </head>
     <body>
          <!-- SET OF USER POST -->
          <div class="USERPOST"> 
               <!-- USER DETAILS -->
               <div id="pfpuserrow">
                    <div id="userandpfp">
                         <div class="pfpPost">
                              <img src="resources/pfpSample.jpg"/>
                         </div>

                         <div id="pfpnames">
                              <span class="pfpdisplayname">DARNA</span>
                              <span class="pfpusername">@AkoSiDarna</span>
                         </div>
                    </div>

                    <button class="smallbutton">
                         <img src="resources/Options Button.svg"/>
                    </button>
               </div>

               <!-- POST TAGS HERE -->
               <div id="posttags">
                    <a href="">#AnotherTagHere</a>
                    <a href="">#TagHere</a>
                    <a href="">#ProbablyAnotherTagHere</a>
               </div>

               <!-- POST TITLE HERE -->
               <div id="posttile">
                    <h2> JOURNEY </h2>
               </div>

               <!-- POST CAPTION HERE -->
               <div id="usercaption">
                    Life is a journey, and every step we take brings us closer to discovering who we truly are. 
                    It’s about embracing the highs and lows, the challenges and triumphs, and finding 
                    joy in the little things. Whether it’s a breathtaking sunset, a cozy moment with friends, or 
                    the satisfaction of achieving a long-awaited goal, these moments shape our story. Let’s 
                    live with purpose, dream big, and never stop learning or growing.
               </div>

               <!-- POST PHOTO HERE -->
               <div id="userphoto">
                    <div id="imageModal" class="modal">
                         <span class="close">&times;</span>
                         <div id="userphotocontainer-modal"> 
                              <img class="modal-content" id="modalImage">
                         </div>
                         <div id="caption"></div>
                    </div>
                         
                    <!--<div id="userphotocontainer"> 
                         <img src="resources/hamster.jpg" class="clickable-image" onclick="sendImageToParent(this)">
                         <img src="resources/monkey.jpg" class="clickable-image" onclick="sendImageToParent(this)">
                         <img src="resources/cat.jpg" class="clickable-image" onclick="sendImageToParent(this)">
                         <img src="resources/grass.jpg" class="clickable-image" onclick="sendImageToParent(this)">
                    </div>-->

                    <div id="userphotocontainer"> 
                         <img src="resources/hamster.jpg" class="clickable-image" onclick="openModal(this)">
                         <img src="resources/monkey.jpg" class="clickable-image" onclick="openModal(this)">
                         <img src="resources/cat.jpg" class="clickable-image" onclick="openModal(this)">
                         <img src="resources/grass.jpg" class="clickable-image" onclick="openModal(this)">
                    </div>
               </div>

               <!-- POST OPTIONS -->
               <div id="postoptionrow">
                    <button id="heart" class="actionButton">
                         <img src="resources/Heart.svg"/>
                         <span class="counter">42</span>
                    </button>
                    <img src="resources/Line.svg" alt="Line">
                    <button id="heartCrack" class="actionButton">
                         <img src="resources/HeartCrack.svg"/>
                         <span class="counter">42</span>
                    </button>
                    <button class="actionButton">
                         <img src="resources/Comments.svg"/>
                    </button>
                    <button id="bookmark" class="actionButton">
                         <img src="resources/bookmark.svg"/>
                    </button>
               </div>

               <div class="post-break"></div>
          </div>
          <!-- SET OF USER POST -->

          <!-- SET OF USER POST -->
          <div class="USERPOST"> 
               <!-- USER DETAILS -->
               <div id="pfpuserrow">
                    <div id="userandpfp">
                         <div class="pfpPost">
                              <img src="resources/pfpSample.jpg"/>
                         </div>

                         <div id="pfpnames">
                              <span class="pfpdisplayname">DARNA</span>
                              <span class="pfpusername">@AkoSiDarna</span>
                         </div>
                    </div>

                    <button class="smallbutton">
                         <img src="resources/Options Button.svg"/>
                    </button>
               </div>

               <!-- POST TAGS HERE -->
               <div id="posttags">
                    <a href="">#TagHere</a>
               </div>

               <!-- POST TITLE HERE -->
               <div id="posttile">
                    <h2> iPhone 16 </h2>
               </div>

               <!-- POST CAPTION HERE -->
               <div id="usercaption">
                    sorry guys i don't have a photo but guess who just got a new iphone 16 pro max 256gb 
                    fully paid no installment (not me)
               </div>

               <!-- POST OPTIONS -->
               <div id="postoptionrow">
                    <button id="heart" class="actionButton">
                         <img src="resources/Heart.svg"/>
                         <span class="counter">42</span>
                    </button>
                    <img src="resources/Line.svg" alt="Line">
                    <button id="heartCrack" class="actionButton">
                         <img src="resources/HeartCrack.svg"/>
                         <span class="counter">42</span>
                    </button>
                    <button class="actionButton">
                         <img src="resources/Comments.svg"/>
                    </button>
                    <button id="bookmark" class="actionButton">
                         <img src="resources/bookmark.svg"/>
                    </button>
               </div>

               <div class="post-break"></div>
          </div>
          <!-- SET OF USER POST -->

          <!-- SET OF USER POST -->
          <div class="USERPOST"> 
               <!-- USER DETAILS -->
               <div id="pfpuserrow">
                    <div id="userandpfp">
                         <div class="pfpPost">
                              <img src="resources/pfpSample.jpg"/>
                         </div>

                         <div id="pfpnames">
                              <span class="pfpdisplayname">DARNA</span>
                              <span class="pfpusername">@AkoSiDarna</span>
                         </div>
                    </div>

                    <button class="smallbutton">
                         <img src="resources/Options Button.svg"/>
                    </button>
               </div>

               <!-- POST TAGS HERE -->
               <div id="posttags">
                    <a href="">#TagHere</a>
               </div>

               <!-- POST TITLE HERE -->
               <div id="posttile">
                    <h2> Free Guy Review </h2>
               </div>

               <!-- POST CAPTION HERE -->
               <div id="usercaption">
                    what u guys think about ryan's movie? i only watched it because of that one cameo. hahaha!
               </div>

               <!-- POST OPTIONS -->
               <div id="postoptionrow">
                    <button id="heart" class="actionButton">
                         <img src="resources/Heart.svg"/>
                         <span class="counter">42</span>
                    </button>
                    <img src="resources/Line.svg" alt="Line">
                    <button id="heartCrack" class="actionButton">
                         <img src="resources/HeartCrack.svg"/>
                         <span class="counter">42</span>
                    </button>
                    <button class="actionButton">
                         <img src="resources/Comments.svg"/>
                    </button>
                    <button id="bookmark" class="actionButton">
                         <img src="resources/bookmark.svg"/>
                    </button>
               </div>

               <div class="post-break"></div>
          </div>
          <!-- SET OF USER POST -->
     </body>
</html>

<!-- JAVASCRIPT -->
<script>
     function openModal(image) {
          const modal = document.getElementById("imageModal");
          const modalImg = document.getElementById("modalImage");
          const captionText = document.getElementById("caption");
     
          modal.style.display = "block";
          modalImg.src = image.src;
     
          modal.onclick = function () {
          modal.style.display = "none";
          };
     }

     /*function sendImageToParent(imageElement) {
          const imageSrc = imageElement.src;
          window.parent.postMessage(
               { type: "imageClick", src: imageSrc }, 
               window.location.origin);
     }*/

     function iconClicked(button, iconType) {
          // Get the image within the button
          const img = button.querySelector('img');

          // Get the counter element if it exists
          const counter = button.querySelector('.counter');

          // Find the parent post or comment
          const post = button.closest('.USERPOST');
          
          // Path for different icon types
          const iconPaths = {
               'heart': {
               default: 'resources/Heart.svg',
               clicked: 'resources/Heart-Clicked.svg'
               },
               'heartCrack': {
               default: 'resources/HeartCrack.svg',
               clicked: 'resources/HeartCrack-Clicked.svg'
               },
               'bookmark': {
               default: 'resources/Bookmark.svg',
               clicked: 'resources/Bookmark-Clicked.svg'
               }
          };

          if (iconType === 'heart' || iconType === 'heartCrack') {
               // Find like and dislike buttons
               const likeButton = post.querySelector('.actionButton img[src*="Heart"]').closest('.actionButton');
               const dislikeButton = post.querySelector('.actionButton img[src*="HeartCrack"]').closest('.actionButton');
               
               // Get like and dislike counters
               const likeCounter = likeButton.querySelector('.counter');
               const dislikeCounter = dislikeButton.querySelector('.counter');

               // Determine current button details
               const currentButton = iconType === 'heart' ? likeButton : dislikeButton;
               const otherButton = iconType === 'heart' ? dislikeButton : likeButton;
               const currentImg = currentButton.querySelector('img');
               const otherImg = otherButton.querySelector('img');
               const currentCounter = iconType === 'heart' ? likeCounter : dislikeCounter;
               const otherCounter = iconType === 'heart' ? dislikeCounter : likeCounter;

               // Normalize the current image's src path to ensure comparison works
               const currentSrc = currentImg.src.split('/').pop(); // Extract only the filename
               const isCurrentlyClicked = currentSrc === iconPaths[iconType].clicked.split('/').pop();

               // Check the other button's state
               const otherSrc = otherImg.src.split('/').pop();
               const isOtherClicked = otherSrc === iconPaths[iconType === 'heart' ? 'heartCrack' : 'heart'].clicked.split('/').pop();

               // Toggle current button state
               if (isCurrentlyClicked) {
                    // If already clicked, reset (unlike/undislike)
                    currentImg.src = iconPaths[iconType].default;
                    currentCounter.textContent = Math.max(0, parseInt(currentCounter.textContent) - 1);
               } else {
                    // If not clicked, set current button to clicked state
                    currentImg.src = iconPaths[iconType].clicked;
                    currentCounter.textContent = parseInt(currentCounter.textContent) + 1;

                    // If the other button was clicked, reset it
                    if (isOtherClicked) {
                         otherImg.src = iconPaths[iconType === 'heart' ? 'heartCrack' : 'heart'].default;
                         otherCounter.textContent = Math.max(0, parseInt(otherCounter.textContent) - 1);
                    }
               }
          } else if (iconType === 'bookmark') {
               // Bookmark button logic
               const currentSrc = img.src.split('/').pop(); // Extract only the filename
               const isCurrentlyBookmarked = currentSrc === iconPaths.bookmark.clicked.split('/').pop();

               // Toggle bookmark state
               if (isCurrentlyBookmarked) {
                    img.src = iconPaths.bookmark.default;
               } else {
                    img.src = iconPaths.bookmark.clicked;
               }
          }
     }

     document.addEventListener('DOMContentLoaded', () => {
          document.querySelectorAll('.actionButton').forEach(button => {
               button.addEventListener('click', function () {
                    const id = this.id; 
                    iconClicked(this, id);
               });
          });
     });
</script>